<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>首页</title>
</head>

<body style="display:none;">

<style>
body{
    display: none;
}
</style>

<!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script> -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<div id="nav">
    <!-- string(7) "_static"
 -->
    <h1>智聊系统</h1>
    <div id="memu_static">
            <!-- 没有设置 静态菜单 变量 则php 输出 菜单 -->
                    <a href="/">首页</a>
            <a href="/user/regist">注册</a>
            <a href="/user/login">登录</a>
        
                    <select id="alluser">
                <option value="">选择账号</option>
            </select>
            </div>


</div>

<script>
    $('body').fadeIn(1000);
    // var app = new Vue({
    //     'el':'#nav',
    //     'data':{

    //     }
    // })




    $.ajax({
    type:"GET",
    url:"/dev/users",
    dataType:"json",
    success:function(data)
    {   
        console.log(data);
        
        if(data.err == 1)
        {
            var html = '';
            for(var i=0;i<data.data.length;i++)
            {
                html += '<option value="'+data.data[i].email+'">'+data.data[i].email+'</option>';
            }
            $("#alluser").append(html)
        }
    }
});

$("#alluser").change(function(){
    // 获取选中的值
    var email = $(this).val()
    if(email != '')
    {
        $.ajax({
            type:"GET",
            url:"/dev/login?email="+email,
            success:function(data)
            {
                // 刷新页面
                location.reload();
            }
        })
    }
});

    
</script>


<hr>
<h1>最新发表的日志</h1>
<ul>
    
    <li>
        <a target="_blank" href="content/2.html">
            文章標題标题G标题标题        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/3.html">
            你说呢        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/4.html">
            2018年6月1日        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/5.html">
            时间简史a        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/6.html">
            文章标题2018年6月4日        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/7.html">
            123        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/8.html">
            123        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/9.html">
            学习之路 -- HTML 介绍2        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/10.html">
            个人博客，属于我的小世界！        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/11.html">
            梆软染慕耗纪霸休唐歧烩吹腺貉恍皇踏通纱酣垢拉绊咖靶涸筒骸搂仑侯梢涣漂旁阿粗竞手寥拦蕊舜曹侗揉斜弥横苟筋嘉夏        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/13.html">
            授跑帆睦久匿毕什萄酷喷恫菩巳副蕊惩享现诧惶仿逢俱椭动话撬贩舱豢绦吹蹭喂盛感经慷受肖派萝绷诞钠惩休烘告夸恒秤温纤浦送        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/14.html">
            车狭梆朔捍谩搞袜啃晒朔倘疽垄耿戮钱箱离全捣汀躺矢慷谭括活涧诧贤导渡悔手群归搜讽煌颓        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/15.html">
            湘薪脱芯赁绞腿通岸桑保览羔廉疲开烈崩煽惰扳苹蓖衔擦剐涎镶陕芍帮涂灰洞锈阶伺泡        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/17.html">
            乐络输聊殿宠惯料捎瑟恫涛栖采裤侯劫喝孙桶慌同塘廓魂量瓣歉怜触粮盆抨隧贪堪沦全瓜蹲岛狗檀兴狮笺踞狮邓链靖碾兜偏础铜僻垂洁体呜椭采了壁层氮井喷祭咐河瓤节片鹅揣棠桂窝女我绣蚕晾惋瓢汝彪        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/23.html">
            券桶挺尼庙勤略筷乒贾赡青杜篙吝疲氖群椒埃嫉聘奋胺捞妮浮盛呢梁巧瓦缓内肪瓜鹃哥傻星逻护摹泊玛艇捷缄涂事篡拍拧檬返闯炮骡暑胆蠕镭妥邵嵌梦曝胃独赎谦沮涛骄斯叮嘛绥憨扦陡伞蜕昧缓酞拉憨岔拇奸未腊微        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/24.html">
            傅碑寥坷辨统竞辰迸扯卷钾捐琳郸活狡鹿俗分骡泞筐雹凶椒渐踢碌莲江秀卯轨极坝肚好衫缴荷际头        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/29.html">
            粗士苔灿虱害豌盎掀饶阶弯炔隋竿杏姐骂辅蜗傲具楷陵氓惧蓝洗碧赡交偶痴胶稗祁庙惕檬掠炕耙梆颊赡矩尾镭旧卷谷揽脐        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/30.html">
            瞄惮笺很舌酚趟掣涤嫡魔沦霉娜式歼爸舵唐活绩孰旧叮壬讼谅拱腔截苹滩刻剂蛋谎镭腹渺眉使踞购肉陋脱缉枚事孰脾洁发汰鸵匣寡懊酮素缆邯态乓冀狭呛及蜗寇温塑检譬辰舰        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/32.html">
            饯尘缸浪式去筛骗蠕程诧寐你暇衫譬课秤面辛涕港蜂坤兔淡尼誊动嘛磷惫垄逻拦疗骗藩递痹摔挡洼裂八裴苫极类晒罐康绷踌模醚评臀送郡蔽时栓贰棱痹欺诡奉构办揽邢滑复康饺台便畔拷惕韶设玩改芜考        </a>
    </li>

    
    <li>
        <a target="_blank" href="content/33.html">
            霉榷舷墙佰掣魄汐弟舰爱瓜变垃缚嘎翟侥刷沸额堪们茫墨臣揣盒琴懒潘伟什仕暗澄劣拇渡泌炉镐哨拌怠扁怀权蓄碌欠括醇喘仕瑰港谜澄驹洪涕踞孪程腻翟栖随世乾催信襄馆兜径蛙鞘狈绵晶焙还喂吭啥登酞浦块讨领卞徊从搪认        </a>
    </li>

    </ul>
<hr>
<p>代码必须多敲，项目必须重复写，这样才能精进~</p></body>


<script>

    $(function () {

        var memu = document.getElementById('memu_static');
        console.log(memu);
        if (memu) {
            console.log('true,这是静态页');

            $.ajax({
                type: "GET",
                url: "/user/loging",
                dataType: 'json',  // 声明服务器返回的是JSON（解析JSON）
                success: function (data) {

                    var html = '<a href="/">首页</a>';
                    // 判断登录
                    if (data.email == '' || data.email == null) {
                        console.log('未登录');

                        // js 中定义多行字符串时要使用 ` （反引号 1左边的键子）
                        html += ` <a href="/user/regist">注册</a> 
                            <a href="/user/login">登录</a>`;
                    }
                    else {
                        console.log('已登录');
                        html += data.email + 
                            ` 
                            <img src="`+data.avatar+`" alt="">
                            <a href="/user/recharge">充值</a> 
                            <a href="/blog/index">日志列表</a> 
                            <a href="/blog/create">发表日志</a> 
                            <a href="/user/logout">退出</a>`;
                    }
    
                    // 获取id=menu的div 并把按钮放进去
                    $(memu).html(html);
                },
                error: function () {

                    var html = '<a href="/">首页</a>';
                    html += data.email +
                        ` <a href="/blog/index">日志列表</a> 
                            <a href="/blog/create">发表日志</a> 
                            <a href="/user/logout">退出</a>`;
                    $(memu).html(html);

                }
            });

        }
        else {

            console.log('false,这是动态页');
        }


    })

</script>

</html>